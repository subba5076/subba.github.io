<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <h1>calci</h1>
    <p>
        package com.example.optionmenuexample;

        import androidx.annotation.NonNull;
        import androidx.appcompat.app.AppCompatActivity;
        
        import android.os.Bundle;
        import android.view.ContextMenu;
        import android.view.Menu;
        import android.view.MenuItem;
        import android.view.View;
        import android.widget.Button;
        import android.widget.EditText;
        import android.widget.TextView;
        
        //create new menu directory under resource (res)
        //create an xml for menu (optionmenu)
        public class MainActivity extends AppCompatActivity {
        EditText n1,n2;
        TextView tv;
        Button b;
            @Override
            protected void onCreate(Bundle savedInstanceState) {
                super.onCreate(savedInstanceState);
                setContentView(R.layout.activity_main);
                n1=findViewById(R.id.num1);
                n2=findViewById(R.id.num2);
                tv = findViewById(R.id.res);
                b=findViewById(R.id.context);
                registerForContextMenu(b); //on click of which item do we want context menu
            }
        
            @Override
            public boolean onCreateOptionsMenu(Menu menu) {  //method to create option menu
                getMenuInflater().inflate(R.menu.optionmenu,menu);   //access the xml from the menu folder we have created
                return super.onCreateOptionsMenu(menu);
            }
        
            @Override
            public boolean onOptionsItemSelected(@NonNull MenuItem item) {
        int id = item.getItemId();
        
                float r;
                float nm1 = Float.parseFloat(n1.getText().toString());
                float nm2 = Float.parseFloat(n2.getText().toString());
        
                switch (id){
                    case R.id.add: r= nm1+nm2;
                    tv.setText(r+"");
                        break;
                    case R.id.sub:r= nm1-nm2;
                        tv.setText(r+"");
                        break;
                    case R.id.mul:
                        r= nm1*nm2;
                        tv.setText(r+"");
                        break;
                    case R.id.div:r= nm1/nm2;
                        tv.setText(r+"");
                        break;
                }
                return super.onOptionsItemSelected(item);
            }
        
            @Override
            public void onCreateContextMenu(ContextMenu menu, View v, ContextMenu.ContextMenuInfo menuInfo) {
                super.onCreateContextMenu(menu, v, menuInfo);
                getMenuInflater().inflate(R.menu.optionmenu,menu);
        
            }
        
            @Override
            public boolean onContextItemSelected(@NonNull MenuItem item) {
        
                int id = item.getItemId();
        
                float r;
                float nm1 = Float.parseFloat(n1.getText().toString());
                float nm2 = Float.parseFloat(n2.getText().toString());
        
                switch (id){
                    case R.id.add: r= nm1+nm2;
                        tv.setText(r+"");
                        break;
                    case R.id.sub:r= nm1-nm2;
                        tv.setText(r+"");
                        break;
                    case R.id.mul:
                        r= nm1*nm2;
                        tv.setText(r+"");
                        break;
                    case R.id.div:r= nm1/nm2;
                        tv.setText(r+"");
                        break;
                }
        
        
                return super.onContextItemSelected(item);
            }
        }          
        </p>
    <h1>two way comm</h1>
    <p>EditText num1,num2;
    Button send;
    TextView res;
    int n1,n2;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        num1 = findViewById(R.id.num1);
        num2 = findViewById(R.id.num2);
        send = findViewById(R.id.send);
        res = findViewById(R.id.res);

        send.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View view) {
                n1 = Integer.parseInt(num1.getText().toString());
                n2 = Integer.parseInt(num2.getText().toString());
                Intent i = new Intent(MainActivity.this,SecondActivity.class);
                i.putExtra("num1",n1);
                i.putExtra("num2",n2);
                startActivityForResult(i,1);
            }
        });
    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, @Nullable Intent data) {
        super.onActivityResult(requestCode, resultCode, data);
        if(requestCode == 1 && resultCode ==2){
            int sum = data.getIntExtra("res",0);

            res.setText("Result = "+sum);
        }
    }
}</p>
    <p>public class SecondActivity extends AppCompatActivity {
    TextView num;
    Button ret;
    int n1,n2;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_second);
        num = findViewById(R.id.numbers);
        ret = findViewById(R.id.ret);

        Intent i1 = getIntent();
        n1 = i1.getIntExtra("num1",0);
        n2 = i1.getIntExtra("num2",0);

        num.setText("Num1 = "+n1+" Num2 = "+n2);

        ret.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View view) {
                Intent i2 = new Intent();
                int res = n1+n2;
                i2.putExtra("res",res);
                setResult(2,i2);
                finish();
            }
        });

    }
}</p>
</body>
</html>
